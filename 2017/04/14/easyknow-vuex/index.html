<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title> 也许是第一个最好理解的Vuex入门 · Co1MugX </title>
    <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="browsermode" content="application">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Co1MugX">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="msapplication-navbutton-color" content="#666666">
<meta name= "format-detection" content="telephone=no" />
<meta name="keywords" content="nlvi, Nlvi" />

    <link rel="apple-touch-icon"  sizes="72x72"  href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466">
    <link rel="apple-touch-icon-precomposed"  sizes="72x72"  href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466">


    <meta name="subtitle" content="箭头跳动是提醒你这有评论框！">


    <meta name="description" content="Co1MugX Blog">



    <meta name="keywords" content="vue, vuex, Nlvi" />

<link rel="stylesheet" href="/PersonalBlog/style/style.css">
<script src="/PersonalBlog/script/jquery.min.js"></script>
<script>
    var CONFIG = {
        title: "Co1MugX",
        author: "Co1MugX",
        lightbox: true,
        animate: true
    }
</script>



    <link rel="stylesheet" href="/PersonalBlog/lightbox/css/lightbox.min.css">




    <link rel="stylesheet" href="/PersonalBlog/syuanpi/syuanpi.min.css">




    <link rel="icon" href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466">




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-98059014-1', 'auto');
  ga('send', 'pageview');
</script>




</head>
<body>
    <div class="progress">
    <div class="progress-inner"></div>
</div>
    <div class="body">
    <div class="tagcloud-mask"></div>  
<div class="tagcloud" id="tagcloud">
    <div class="tagcloud-inner">
        <a href="/PersonalBlog/tags/Bandix/" style="font-size: 14px;">Bandix</a> <a href="/PersonalBlog/tags/CSS/" style="font-size: 14px;">CSS</a> <a href="/PersonalBlog/tags/ES6/" style="font-size: 14px;">ES6</a> <a href="/PersonalBlog/tags/JavaScript/" style="font-size: 14px;">JavaScript</a> <a href="/PersonalBlog/tags/NodeJS/" style="font-size: 14px;">NodeJS</a> <a href="/PersonalBlog/tags/Syuanpi/" style="font-size: 14px;">Syuanpi</a> <a href="/PersonalBlog/tags/TypeScript/" style="font-size: 14px;">TypeScript</a> <a href="/PersonalBlog/tags/electron/" style="font-size: 14px;">electron</a> <a href="/PersonalBlog/tags/vue/" style="font-size: 14px;">vue</a> <a href="/PersonalBlog/tags/vuex/" style="font-size: 14px;">vuex</a> <a href="/PersonalBlog/tags/实验室/" style="font-size: 14px;">实验室</a> <a href="/PersonalBlog/tags/小作坊/" style="font-size: 14px;">小作坊</a> <a href="/PersonalBlog/tags/微信小程序/" style="font-size: 14px;">微信小程序</a> <a href="/PersonalBlog/tags/扣肉小记/" style="font-size: 14px;">扣肉小记</a> <a href="/PersonalBlog/tags/看片子/" style="font-size: 14px;">看片子</a> <a href="/PersonalBlog/tags/面试/" style="font-size: 14px;">面试</a>
    </div>
</div>
    <header class="header" id="header">
    <div class="title syuanpi tvIn">
    <div class="table">
        <div class="connect">
            <div class="connect-inner">
                <span><a href="/">Co1MugX</a></span>
                
                    <span id="subtitle">箭头跳动是提醒你这有评论框！</span>
                
            </div>
        </div>
    </div>
</div>
    <nav class="main-nav syuanpi tvIn">
<div class="table">

    <ul class="menu">
        
        <li class="menu-item">
            <a href="javascript:;" id="search">
                <span>搜索</span>
                
                    <span class="menu-item-label">search</span>
                
            </a>
        </li>
        
        
        
            <li class="menu-item">
                <a href="/PersonalBlog/">
                    <span>文章</span>
                    
                        <span class="menu-item-label">article</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/PersonalBlog/archives">
                    <span>归档</span>
                    
                        <span class="menu-item-label">archives</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="javascript:;" id="tags">
                    <span>标签</span>
                    
                        <span class="menu-item-label">tags</span>
                    
                </a>
            </li>
        
        
        
            <li class="menu-item">
                <a href="/PersonalBlog/about">
                    <span>关于</span>
                    
                        <span class="menu-item-label">about</span>
                    
                </a>
            </li>
        
        
    </ul>

</div>
</nav>
</header>
<div class="mobile-header">
    <div class="mobile-header-body">
        <div class="mobile-header-list">
            
            
                <div class="mobile-nav-item">
                    <a href="/PersonalBlog/">
                        <span>文章</span>
                        
                            <span class="menu-item-label">article</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/PersonalBlog/archives">
                        <span>归档</span>
                        
                            <span class="menu-item-label">archives</span>
                        
                    </a>
                </div>
            
            
            
                <div class="mobile-nav-item inner-cloud">
                    <div class="mobile-nav-tag">
                        <a href="javascript:;" id="mobile-tags">
                            <span>标签</span>
                            
                                <span class="menu-item-label">tags</span>
                            
                        </a>
                    </div>
                    <div class="mobile-nav-tagcloud">
                        <div class="mobile-tagcloud-inner">
                            <a href="/PersonalBlog/tags/Bandix/" style="font-size: 14px;">Bandix</a> <a href="/PersonalBlog/tags/CSS/" style="font-size: 14px;">CSS</a> <a href="/PersonalBlog/tags/ES6/" style="font-size: 14px;">ES6</a> <a href="/PersonalBlog/tags/JavaScript/" style="font-size: 14px;">JavaScript</a> <a href="/PersonalBlog/tags/NodeJS/" style="font-size: 14px;">NodeJS</a> <a href="/PersonalBlog/tags/Syuanpi/" style="font-size: 14px;">Syuanpi</a> <a href="/PersonalBlog/tags/TypeScript/" style="font-size: 14px;">TypeScript</a> <a href="/PersonalBlog/tags/electron/" style="font-size: 14px;">electron</a> <a href="/PersonalBlog/tags/vue/" style="font-size: 14px;">vue</a> <a href="/PersonalBlog/tags/vuex/" style="font-size: 14px;">vuex</a> <a href="/PersonalBlog/tags/实验室/" style="font-size: 14px;">实验室</a> <a href="/PersonalBlog/tags/小作坊/" style="font-size: 14px;">小作坊</a> <a href="/PersonalBlog/tags/微信小程序/" style="font-size: 14px;">微信小程序</a> <a href="/PersonalBlog/tags/扣肉小记/" style="font-size: 14px;">扣肉小记</a> <a href="/PersonalBlog/tags/看片子/" style="font-size: 14px;">看片子</a> <a href="/PersonalBlog/tags/面试/" style="font-size: 14px;">面试</a>
                        </div>
                    </div>
                </div>
            
            
            
                <div class="mobile-nav-item">
                    <a href="/PersonalBlog/about">
                        <span>关于</span>
                        
                            <span class="menu-item-label">about</span>
                        
                    </a>
                </div>
            
            
        </div>
    </div>
    <div class="mobile-header-nav">
        <div class="mobile-header-item" id="mobile-left">
            <div class="header-menu-item">
                <span class="header-menu-line"></span>
            </div>
        </div>
        <h1 class="mobile-header-title">
            <a href="/">Co1MugX</a>
        </h1>
        <div class="mobile-header-item"></div>
    </div>
</div>

    <div class="container">
        <main class="main" id="main">
            
    
    <article class="post">
        <header class="post-header">
            <div class="post-time syuanpi riseIn-light back-1">
                <span>2017年4月14日</span>
                
                
                    <span class="post-category"><a href="/PersonalBlog/categories/前端思考/">前端思考</a></span>
                
                
            </div>
            <h1 class="post-title syuanpi riseIn-light back-2">
            
                也许是第一个最好理解的Vuex入门
            
            </h1>
            
                
                    <div class="post-tags syuanpi riseIn-light back-3">
                    
                        <a href="/PersonalBlog/tags/vue/">vue</a>
                    
                        <a href="/PersonalBlog/tags/vuex/">vuex</a>
                    
                    </div>
                
            
        </header>
        <div class="post-content syuanpi riseIn-light back-3">
            
                <p>刚用vue不久，应该说还有大量的API还没用过还没熟悉过的时候，突然接受一个新内容，而且还是个很抽象的东西，说实话刚接触的时候完全不知道这东西有什么用…只听说过它能状态管理啊，什么全局控制啊。好牛逼啊666啊。</p>
<p><strong>哦，然后呢？</strong></p>
<p>后来稍微理解之后，决定写出来。浅入浅出的理解一下vuex。<a id="more"></a></p>
<h2 id="what-s-vuex"><a href="#what-s-vuex" class="headerlink" title="what s vuex"></a>what s vuex</h2><p>官方文档：<a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="external">Introduction · GitBook</a>，vue的内容都挺良心的，都是看似官方的中文文档…</p>
<p>Vuex还是跟上面所述…一个应用的状态管理模式。</p>
<blockquote>
<p>Vuex 是一个专为 Vue.js 应用程序开发的<strong>状态管理模式</strong>。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
</blockquote>
<p>所以只能说它是一个接近于redux，类似于react与redux的那种存在。可是印象没记错的话，react和redux其实是可以独立使用的，这完全就是两个东西，只是可以配合到一块儿去。而vue+vuex不同，vuex之为vue工作，并不能为react等其他框架使用。（也就是redux和vuex都可以为vue服务！不同在于vuex是正室redux是娼！）</p>
<p>至于“什么是状态管理模式”，官方给了一个例子，看例子就行了。</p>
<p>什么看不懂？看得懂就不用看这个了？好的可以。开始举例子了啊！</p>
<p>比如你现在看到桌面上有个馒头，然后你觉得不够吃不爽，你又从冰箱里拿出了一个叉烧包放在桌子上。所以这个时候桌面上就会有一个馒头和一个叉烧包。然后你是哪种什么难吃先吃什么的人（没酱！干吃！反驳我的人晚上别吃饭了！），然后你拿起一个馒头咬了一口然后放在手上。</p>
<p>OK举例完了。这就是状态管理。</p>
<p>我们一个vue实例（我就以我会用的2.0角度说），首先会有一个template，模板文件，里面存放的是dom。然后是<code>data()</code>方法，存放固定或不固定的数据。还有一个<code>methods</code>，存放方法，各种方法。对吧没问题吧！你看到(<code>view or template</code>)桌面上<code>{ mantou: 1 }</code>，你觉得不爽去拿(<code>methods -&gt; take()</code>)，然后多了一个叉烧包放在桌子上<code>{ mantou: 1, chashaobao: 1 }</code>，然后你拿起馒头就吃(<code>methods -&gt; ate()</code>)，还拿在手上(保持状态) ，当然data()目前肯定是 { mantou: 0.9, chashaobao: 1 }。<strong>其实我有个梦想，去教小朋友学编程，从小把路给他带歪掉。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="comment">// state</span></div><div class="line">  data () &#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      food: &#123;</div><div class="line">        mantou: <span class="number">1</span>,</div><div class="line">        chashaobao: <span class="number">0</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// view</span></div><div class="line">  template: <span class="string">`</span></div><div class="line"><span class="string">    &lt;div class="table"&gt;</span></div><div class="line"><span class="string">		&lt;p&gt;&#123;&#123; food.mantou &#125;&#125; &lt;/p&gt;</span></div><div class="line"><span class="string">		&lt;p&gt;&#123;&#123; food.chashaobao &#125;&#125; &lt;/p&gt;</span></div><div class="line"><span class="string">	&lt;/div&gt;</span></div><div class="line"><span class="string">  `</span>,</div><div class="line">  <span class="comment">// actions</span></div><div class="line">  methods: &#123;</div><div class="line">    ate () &#123;</div><div class="line">      <span class="keyword">this</span>.mantou -= <span class="number">0.1</span></div><div class="line">    &#125;,</div><div class="line">    take () &#123;</div><div class="line">      <span class="keyword">this</span>.chashaobao += <span class="number">1</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>那么按照vuex开说，就是三种状态，<code>state</code>, <code>action</code>,<code>view</code>。分别就状态，动作，视图。按照官方说的，如果是按照单向数据流来说的话就是 视图 -&gt; 动作 -&gt; 状态 -&gt; 视图。当然刚刚那个例子很明显，都在一个组件内…涉及到多个组件了。就会出现“单向数据流简洁性被破坏”</p>
<blockquote>
<ul>
<li>多个视图依赖于同一状态。</li>
<li>来自不同视图的行为需要变更同一状态。</li>
</ul>
</blockquote>
<p>就好比现在只是你一个人在做这些事而已，如果家里来了个女朋友呢？（对不起我知道你没有。那你还是单组件管理就行了）。</p>
<p>官方的意思就是：如果多个视图依赖一个状态，就会出现组件嵌套特别繁琐，而且状态数据也不好传递。如果不同视图行为都要变一个状态，意思就是你咬了一口的馒头你女朋友直接从你嘴里叼走一块！那怎么办！你可以选择不带套路的顺便亲一下是吧！<strong>但是程序并不会“亲一下”。</strong></p>
<p>所以<code>vuex</code>或者说<code>redux</code>就是因为这个“状态共享解决”而诞生的。（或者说vuex的诞生就是为了提醒你你还没有女朋友。</p>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><p>按照官方文档，核心概念一共有5个：<code>State</code>, <code>Getters</code>, <code>Mutations</code>, <code>Actions</code>, <code>Modules</code>，一整个vuex在项目里称为<code>store</code>。</p>
<blockquote>
<ol>
<li>Vuex 的状态存储是响应式的。当 Vue 组件从 store 中读取状态的时候，若 store 中的状态发生变化，那么相应的组件也会相应地得到高效更新。</li>
<li>你不能直接改变 store 中的状态。改变 store 中的状态的唯一途径就是显式地<strong>提交(commit) mutations</strong>。这样使得我们可以方便地跟踪每一个状态的变化，从而让我们能够实现一些工具帮助我们更好地了解我们的应用。</li>
</ol>
</blockquote>
<p>首先是在main.js先声明你要用vuex，你要把vuex导入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></div><div class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></div><div class="line"></div><div class="line">Vue.use(Vuex)</div></pre></td></tr></table></figure>
<p>然后创建一个基础的Store，是这样的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * main.js</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</div><div class="line">  state: &#123;</div><div class="line">    mantou: <span class="number">1</span></div><div class="line">  &#125;,</div><div class="line">  mutations: &#123;</div><div class="line">    ate: <span class="function">(<span class="params">state</span>) =&gt;</span> &#123;</div><div class="line">      state.mantou -= <span class="number">0.1</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>要记得实例要调用一下</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">  ...,</div><div class="line">  ...,</div><div class="line">  store</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>冰箱啊！也叫做单一状态树，也就是说一整个应用就只有这么一个state，因为放在store中，而store又是一个全局的，所以这是一个人人都能用的大冰箱！（你女朋友也能开</p>
<p>那么，比如冰箱现在是这么些东西。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">state = &#123;</div><div class="line">  mantou: <span class="number">1</span>,</div><div class="line">  chashao: <span class="number">3</span>,</div><div class="line">  panzi: <span class="string">'红烧鱼'</span>,</div><div class="line">  wan: &#123;</div><div class="line">    name: <span class="string">'卤水鸡腿'</span>,</div><div class="line">    num: <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后这么取出东西：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">store.state.mantou 	<span class="comment">//获取馒头的值(数量)</span></div><div class="line">store.state.panzi 	<span class="comment">//红烧鱼</span></div></pre></td></tr></table></figure>
<p>如果在vue实例中，应该这么取</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.$store.state.mantou 	<span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>之所以有<code>$store</code>这种定义，是因为已经作为vue的一个插件了，一开始是不是有<code>Vue.use</code>过。</p>
<h3 id="Mutations"><a href="#Mutations" class="headerlink" title="Mutations"></a>Mutations</h3><p>这就是决定是你女朋友吃还是你自己吃了</p>
<blockquote>
<p>更改 Vuex 的 store 中的状态的唯一方法是提交 mutation。Vuex 中的 mutations 非常类似于事件：每个 mutation 都有一个字符串的 <strong>事件类型 (type)</strong> 和 一个 <strong>回调函数 (handler)</strong>。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">mutations = &#123;</div><div class="line">  ate (state) &#123;</div><div class="line">    state.mantou -= <span class="number">0.1</span></div><div class="line">  &#125;,</div><div class="line">  take (state) &#123;</div><div class="line">    state.chashao -= <span class="number">1</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>虽然是在<code>mutaitons</code>构造方法，但这个载体并不是一个方法载体，等下讲。</p>
<p>那么如果决定是谁吃：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * SingleDog.js</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  ... ,</div><div class="line">  ... ,</div><div class="line">  method: &#123;</div><div class="line">    ...() &#123;</div><div class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'ate'</span>)  <span class="comment">//mantou: 0.9</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不一定非要这么写，反正只要能调用就行了。</p>
<h3 id="mutations-payload"><a href="#mutations-payload" class="headerlink" title="mutations payload"></a>mutations payload</h3><p>还有一个是mutations 的载荷（payload），就是在上面那种调用的基础上再传入第二个参数，第二个参数就叫payload。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mutations = &#123;</div><div class="line">  take (state, value) &#123;</div><div class="line">    state.chashao -= value</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>比如这样，首先构建的时候已经有准备可以传入第二个参数，然后调用的时候同理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">store.commit(<span class="string">'take'</span>, <span class="number">1</span>)		<span class="comment">//chashao - 1</span></div></pre></td></tr></table></figure>
<p>或者payload也可以是个Object（对象！你没有！）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mutations = &#123;</div><div class="line">  take (state, obj) &#123;</div><div class="line">    state.chashao -= obj.num</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * GirlFriend.js</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  ... ,</div><div class="line">  ... ,</div><div class="line">  method: &#123;</div><div class="line">    ...() &#123;</div><div class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'take'</span>, &#123;</div><div class="line">        num: <span class="number">1</span></div><div class="line">      &#125;)  <span class="comment">//chashao - 2 （刚被狗吃了一个）</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>暂时先总结这两个。</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="1-mutations-amp-actions"><a href="#1-mutations-amp-actions" class="headerlink" title="1. mutations &amp; actions"></a>1. mutations &amp; actions</h3><p><a href="https://www.zhihu.com/question/48759748" target="_blank" rel="external">vuex中为什么把把异步操作封装在action，把同步操作放在mutations？ - 知乎</a></p>
<p>官方也有提到，mutations跟actions是差不多的，不同在于</p>
<blockquote>
<ul>
<li>Action 提交的是 mutation，而不是直接变更状态。</li>
<li>Action 可以包含任意异步操作。</li>
</ul>
</blockquote>
<p>也就是按我的理解，他们的关系是这样的：<strong>mutations直接操作state内容，actions直接操作的是mutations。如果需要用actions去操作state的话建议做法就是通过actions操作mutations使state发生变化。</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">actions = &#123;</div><div class="line">  onAte (someOne) &#123;</div><div class="line">    someOne.commit(<span class="string">'ate'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个怎么举例啊…你劝着你女朋友：来嘛来嘛吃一口嘛。这样？</p>
<p>那么如何劝？</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">store.dispatch(<span class="string">'onAte'</span>)</div></pre></td></tr></table></figure>
<p>不仅这样，mutations和actions分开使用还有一个场景：<strong>同步和异步</strong>。</p>
<p>这个就好比，如果你只是使用<code>mutations</code>来操作state的话，就是你只能看着你女朋友吃完然后你吃剩下的。</p>
<p>而使用<code>actions</code>的话，你可以边劝你女朋友吃一口，你自己还可以顺便咬一口，因为异步不受限制。</p>
<p>关于同步跟异步的代码例子，官方已经列举特别特别多了。</p>
<p><a href="https://vuex.vuejs.org/zh-cn/actions.html" target="_blank" rel="external">Actions · GitBook</a></p>
<p>结束！</p>

            
        
        </div>
        
            
            
    <hr class="copy-line">
    <div class="post-copyright">
        <div class="copy-author">
            <span>作者 :</span>
            <span>Co1MugX</span>
        </div>
        <div class="copy-url">
            <span>地址 :</span>
            <a href="https://colmugx.github.io/2017/04/14/easyknow-vuex/">https://colmugx.github.io/2017/04/14/easyknow-vuex/</a>
        </div>
        <div class="copy-origin">
            <span>来源 :</span>
            <a href="https://colmugx.github.io">https://colmugx.github.io</a>
        </div>
        <div class="copy-license">
            
            著作权归作者所有，转载请联系作者获得授权。
        </div>
    </div>

        
    </article>
    
        
    <nav class="article-page">
        
            <a href="/PersonalBlog/2017/06/13/Bandix0/" id="art-left" class="art-right">
                <span class="next-title">
                    从0到1的Bandix（零） - 想法记录<i class="iconfont icon-right"></i> 
                </span>
            </a>
        
        
            <a href="/PersonalBlog/2017/04/07/axios-tutorial/" id="art-right" class="art-left">
                <span class="prev-title"> 
                    <i class="iconfont icon-left"></i>Vue2.0的网络请求 - Axios
                </span>
            </a>
        
    </nav>

        
    <i id="com-switch" class="iconfont icon-more jumping-in long infinite" style="font-size:24px;display:block;text-align:center;transform:rotate(180deg);"></i>
    <div class="post-comments" id="post-comments" style="display: block;margin: auto 16px;">
        
        
        
        
<!-- Disqus Comments -->
<div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
<script type="text/javascript">
    var disqus_shortname = 'co1mugxs-blog';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


    </div>

    


        </main>
        <footer class="footer syuanpi fadeIn" id="footer">
    <hr>
    <div class="footer-wrapper">
        <div class="left">
            <div class="contact-icon">
    
    
    
    
    
    
    
    
        
        
        
        
            <a href="https://www.zhihu.com/people/colmugx" class="iconfont icon-zhihu" title="zhihu"></a>
        
        
        
        
    
        
            <a href="https://github.com/ColMugX" class="iconfont icon-github" title="github"></a>
        
        
        
        
        
        
        
    
</div>
        </div>
        <div class="right">
            <div class="copyright">
    <div class="info">
        <span>&copy;</span>
        <span>2016 ~ 2017</span>
        <span>❤</span>
        <span>Co1MugX</span>
    </div>
    <div class="theme">
        <span>
            动力来源于
            <a href="http://hexo.io/" target="_blank">Hexo </a>
        </span>
        <span>
            主题
            <a href="https://github.com/ColMugX/hexo-theme-Nlvi"> Nlvi </a>
        </span>
    </div>
    
</div>
        </div>
    </div>
</footer>
    </div>
    <script src="/PersonalBlog/script/nlvi.js"></script>
<script src="/PersonalBlog/script/search.js"></script>

    <script src="/PersonalBlog/lightbox/js/lightbox.min.js"></script>

<script>
$(document).ready(function(){
    document.body.addEventListener('touchstart', function () {});
    $('.progress').hide();
    $('.body').show();
    Nlvi.tagcloud();
    Nlvi.mobileHeader();
    Nlvi.back2top();
    Nlvi.smoothScroll();
    Nlvi.onView();
    Nlvi.showToc();
    Nlvi.showComments();
    Nlvi.showReward();
    Nlvi.picPos();

    !CONFIG.animate && Nlvi.offAnimate();
    CONFIG.lightbox && Nlvi.onPicBox();
})
</script>
    </div>
    
        
    <div class="post-toc">
        <span class="title">文章目录</span>
        <div class="toc-inner syuanpi back-1 fallIn-light">
            <li class="title-link"><a href="javascript:;" class="toTop">也许是第一个最好理解的Vuex入门</a></li>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-s-vuex"><span class="toc-text">what s vuex</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Usage"><span class="toc-text">Usage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#State"><span class="toc-text">State</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mutations"><span class="toc-text">Mutations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mutations-payload"><span class="toc-text">mutations payload</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Tips"><span class="toc-text">Tips</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-mutations-amp-actions"><span class="toc-text">1. mutations & actions</span></a></li></ol></li></ol>
        </div>
    </div>

    
    <div class="backtop syuanpi dead toTop" id="backtop">
    <i class="iconfont icon-up"></i>
    <span style="text-align:center;font-family:Georgia;"><span style="font-family:Georgia;" id="scrollpercent">1</span>%</span>
</div>
    
    <div class="search" id="search">
        <div class="mask" id="mask"></div>
        <div class="search-wrapper syuanpi">
            <h1 id="search-header" class="syuanpi">搜索一下？</h1>
            <div class="input">
                <input type="text" id="local-search-input" results="0" name="">
            </div>
            <div id="local-search-result"></div>
        </div>
    </div>
    <script>
    var GREETING = {
        morning: "我的博客里可没有早饭！",
        noon: "记得午休吃饭，不着急看我的博客~",
        after: "下午好，感谢查阅我的博客",
        night: "您来我的博客看笑话当做休息嘛",
        midnight: "我觉得大半夜就不要看啦"
    }
    $(document).ready(function(){
        Nlvi.search();
    });
    </script>

</body>
</html>
