<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>Co1MugX | 努力工作，认真学习，加油！</title>
    
    <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/main.js"></script>
    
        <link rel="stylesheet" href="/lightbox/css/lightbox.min.css">
    
    <link rel="icon" href="https://avatars2.githubusercontent.com/u/21327913?v=3&s=466">
    <!-- isnt analytics -->
    
</head>

    <body>
        <div id="loader">
    <div class="loader-content">
        <span>Loading...</span>
    </div>
</div>

       <div id="container" style="display:none">
        <header>
    <div class="mobile-header">
        <a href="/"><span id="mobile-title">Co1MugX</span></a>
    </div>
    <div class="header">
        <a><span id="title">Co1MugX</span></a>
        <div class="squa-list">
    <ul>
        <li class="first"><a href="/" id="home">首页</a></li>
        <li class="second"><a href="javascript:;" id="about">关于</a></li>
        
        <li id="subtitle">
            努力工作，认真学习，加油！
        </li>
        
    </ul>
</div>

    </div>
</header>

        
    <div class="main">
    <article class="blog-art-inner" itemprop="blogPost">
        <div class="art-date-inner">
    <span>
        <time datetime="Dec 9th 2016" itemprop="datePublished">
            Dec 9th 2016
        </time>
        </span>
</div>

        <header class="art-title-inner">
            <h2 itemprop="name">
                前端水深JS玄学 —— 尝试后端框架Hapi
            </h2>
            
  <div class="art-tags">
    <ul class="art-tags-list"><li class="art-tags-list-item"><a class="art-tags-list-link" href="/tags/NodeJS/">NodeJS</a></li><li class="art-tags-list-item"><a class="art-tags-list-link" href="/tags/前端/">前端</a></li><li class="art-tags-list-item"><a class="art-tags-list-link" href="/tags/实验室/">实验室</a></li></ul>
</div>


            <hr>
        </header>
        <div class="art-content">
            <div class="content-inner" itemprop="article">
                <blockquote>
<p>Hapi?可我一点都happy不起来…</p>
</blockquote>
<p>老规矩老套路：<a href="https://hapijs.com/" target="_blank" rel="external">链接在这</a></p>
<h3 id="什么是Hapi"><a href="#什么是Hapi" class="headerlink" title="什么是Hapi"></a>什么是Hapi</h3><p>当<code>Node.js</code>用来做后端的时候，后端框架在我听说过的就三个：<code>Express</code>、<code>Koa</code>、<code>Hapi</code>。<br>超喜欢<code>Koa</code>，不过真的，能力有限，那些我没见过的语法我没了解过所以真的不懂，但据说是个超轻可玩性超高的框架，哎好可惜技不如人。例如那个<code>yield</code>，是个<code>python</code>的产物，但是我py真的不精，所以…我有一句妈卖批我现在就要讲。<a id="more"></a><br><code>Hapi</code>同样也是一个后端框架，而且它建立一个App很简单，就这样<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Hapi = <span class="built_in">require</span>(<span class="string">'hapi'</span>);</div><div class="line"><span class="comment">// Create a server with a host and port</span></div><div class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> Hapi.Server();</div><div class="line">server.connection(&#123; </div><div class="line">    <span class="attr">host</span>: <span class="string">'localhost'</span>, </div><div class="line">    <span class="attr">port</span>: <span class="number">8000</span> </div><div class="line">&#125;);</div><div class="line"><span class="comment">// Add the route</span></div><div class="line">server.route(&#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">path</span>:<span class="string">'/hello'</span>, </div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> reply(<span class="string">'hello world'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"><span class="comment">// Start the server</span></div><div class="line">server.start(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (err) &#123;</div><div class="line">        <span class="keyword">throw</span> err;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Server running at:'</span>, server.info.uri);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h3 id="Hapi有哪些不一样"><a href="#Hapi有哪些不一样" class="headerlink" title="Hapi有哪些不一样"></a>Hapi有哪些不一样</h3><p>第一眼看起来是超直观，跟<code>Express</code>还是有很大区别的。<br>首先跟直观看到不同的就是，<code>Hapi</code>require之后没有<code>var app = hapi()</code>类似这样的东西，而是重新实例化了一个<code>server</code>，<br>然后用这个实例化出来的<code>server</code>定义接口啊，路由啊。然后通过<code>server.start</code>来启动服务。清新脱俗……<br>另外通过这篇<a href="http://ourjs.com/detail/5490db1c8a34fa320400000e" target="_blank" rel="external">Node.js 框架比较: Express vs. Koa vs. Hapi</a>可以看到，在REST中，<code>Hapi</code>是这么处理的<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">server.route([</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/items'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Get item id'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/items/&#123;id&#125;'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Get item id: '</span> + request.params.id);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'POST'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/items'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Post item'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'PUT'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/items/&#123;id&#125;'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Put item id: '</span> + request.params.id);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'DELETE'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/items/&#123;id&#125;'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Delete item id: '</span> + request.params.id);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">request, reply</span>) </span>&#123;</div><div class="line">      reply(<span class="string">'Hello world'</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">]);</div></pre></td></tr></table></figure></p>
<p>就特别喜欢这样的直观的东西，我记得在知乎看到过一个大手说过：代码是给人看的，顺便机器也看得懂而已。这样看起来就特别舒服不会有点怪怪的。所以我就喜欢上这个框架了。<br>不过，<strong>这个框架的文档实在太少了！</strong>脑子不怎么发达的人真是不知道怎么玩。另外，我怎么看不到社区……而且据说这个框架更适合大型的项目。<br>其实看了官方的英文教程之后，就想，现在就只要加入<code>&#39;use strict&#39;;</code>就可以使用es6么，不需要babel转成es5？我也不知道现在有多少浏览器已经会看es6了。</p>
<p>也没深入的学习，因为前端还没学好呢…先看一眼日后再挠个坑学习吧。（其实是对于菜鸟来说还是<code>Express</code>+<code>Typescript</code>更适合我…）</p>

            </div>
        
    
    <nav id="art-nav">
     <hr>
      
        <a href="/2016/12/09/update-npm-packages/" id="art-left" class="art-left">
          <div class="art-lastTitle">
            
                 < 更新全局NPM的所有可更新包
            
          </div>
        </a>
      
      
        <a href="/2016/12/02/your-name/" id="art-right" class="art-right">
          <div class="art-lastTitle">你叫什么？ 《你的名字。》 > </div>
        </a>
      
    </nav>
    


            </div>
    </article>
    
    <hr style="width:60%;margin:0 auto;margin-bottom:10px;color:#FFF">
    <div id="comSwitch" class="comSwitch">
        <span>点击这里 ▾ 打开评论</span>
    </div>
    
    
      
        
          
            <!-- UY BEGIN -->
<div id="uyan_frame" style="display:none"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2116358"></script>
<!-- UY END -->

            <script type="text/javascript">
            $(document).ready(function () {
                var open = false;
                $('#comSwitch').click(function () {
                    if (open) {
                        $('#uyan_frame').removeClass('showIn');
                        $('#uyan_frame').addClass('hideIn');
                        $('#comSwitch span').html("点击这里 ▾ 打开评论")
                        setTimeout(function(){
                            $('#uyan_frame').css('display', 'none');
                        },350);
                        open = false;
                    } else {
                        $('#uyan_frame').removeClass('hideIn');
                        $('#uyan_frame').addClass('showIn');
                        $('#uyan_frame').css('display', 'block');
                        $('#comSwitch span').html("点击这里 ▴ 收起评论")
                        open = true;
                    }
                });
            });
            </script>
            
    </div>



        <div class="about">
    <div class="about-info">
        <h2>about</h2>
        <p>您好！我叫　<span>Co1MugX</span>。</p>
        
        <p>弄个博客单纯想玩，现在的前端真的好“前端”…噢对了，iOS的阅读体验很嗨喔~</p>
        
        <ul class="sub-list">
            
                
                <li>
                    github：
                    <a href="https://github.com/ColMugX">ColMugX</a>
                </li>
                
                
                <li>
                    zhihu：
                    <a href="https://www.zhihu.com/people/colmugx">colmugx</a>
                </li>
                
        </ul>
        

    </div>
    <div class="about-friend">
        
            <h2>这是我的朋友列表</h2>
            <ul class="friend-list">
            
                <li><a href="http://www.ahonn.me">ahonn</a></li>
            
            </ul>

        
    </div>
</div>

        <footer id="footer" class="footer">
    <div class="blog-tags">
<hr>
<a href="/tags/Blank/" style="font-size: 14px;">Blank</a> <a href="/tags/CSS/" style="font-size: 14px;">CSS</a> <a href="/tags/Hexo/" style="font-size: 14px;">Hexo</a> <a href="/tags/NodeJS/" style="font-size: 14px;">NodeJS</a> <a href="/tags/Rousy/" style="font-size: 14px;">Rousy</a> <a href="/tags/Syuanpi/" style="font-size: 14px;">Syuanpi</a> <a href="/tags/Vue/" style="font-size: 14px;">Vue</a> <a href="/tags/你的名字/" style="font-size: 14px;">你的名字</a> <a href="/tags/前端/" style="font-size: 14px;">前端</a> <a href="/tags/吹水/" style="font-size: 14px;">吹水</a> <a href="/tags/实验室/" style="font-size: 14px;">实验室</a> <a href="/tags/小作坊/" style="font-size: 14px;">小作坊</a> <a href="/tags/微信小程序/" style="font-size: 14px;">微信小程序</a> <a href="/tags/扣肉小记/" style="font-size: 14px;">扣肉小记</a> <a href="/tags/看片子/" style="font-size: 14px;">看片子</a> <a href="/tags/编程猫/" style="font-size: 14px;">编程猫</a>
</div>

    <div class="info">
        
            &copy;
            2017
                <a href="https://github.com/ColMugX" target="_blank">
                    Co1MugX
                </a> <a href="https://github.com" target="_blank">❤</a>
                
    </div>
    <div class="theme">
        <p>
            动力来源于　<a href="http://hexo.io/" target="_blank">Hexo</a>　Theme　<a href="https://github.com/ColMugX/hexo-theme-Blank" target="_blank">Blank</a>&nbsp;
        </p>
    </div>
</footer>

    <script src="/lightbox/js/lightbox-plus-jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            if (window.screen.width >= 540) {
            var $imga = $('img').parent('a');
            $imga.attr('rel', 'lightbox');
            }
        });
    </script>


        <div class="goTop" id="goTop"></div>
<div class="mobile-nav">
    <div class="mobile-nav-item" id="menu-item"></div>
    <div class="mobile-nav-list">
        
        <a class="mobile-nav-list-item" href="/">首页</a>
        
        <a class="mobile-nav-list-item" href="/archives">归档</a>
        
        <a class="mobile-nav-list-item" href="javascript:;" id="mobile-about">关于</a>
    </div>
</div>

      </div>
    </body>
</html>
