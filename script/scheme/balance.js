!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(t=t||self).Nlvi=r()}(this,function(){"use strict";function o(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function e(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function r(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,r){return(s=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function c(t,r){return!r||"object"!=typeof r&&"function"!=typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):r}function u(t,r,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,r,n){var e=function(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=i(t)););return t}(t,r);if(e){var o=Object.getOwnPropertyDescriptor(e,r);return o.get?o.get.call(n):o.value}})(t,r,n||t)}var a=function(t,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(t,r)};function n(t,r){function n(){this.constructor=t}a(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function l(t){return"function"==typeof t}var f=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t);f=t},get useDeprecatedSynchronousErrorHandling(){return f}};function h(t){setTimeout(function(){throw t})}var d={closed:!0,next:function(t){},error:function(t){if(p.useDeprecatedSynchronousErrorHandling)throw t;h(t)},complete:function(){}},b=Array.isArray||function(t){return t&&"number"==typeof t.length};function y(t){return null!=t&&"object"==typeof t}var v,m={e:{}};function _(){try{return v.apply(this,arguments)}catch(t){return m.e=t,m}}function w(t){return v=t,_}function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,r){return r+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}t.prototype=Object.create(Error.prototype);var E=t,g=function(){function e(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var t;return e.prototype.unsubscribe=function(){var t,r=!1;if(!this.closed){var n=this._parent,e=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s=-1,c=e?e.length:0;n;)n.remove(this),n=++s<c&&e[s]||null;if(l(o))w(o).call(this)===m&&(r=!0,t=t||(m.e instanceof E?S(m.e.errors):[m.e]));if(b(i))for(s=-1,c=i.length;++s<c;){var u=i[s];if(y(u))if(w(u.unsubscribe).call(u)===m){r=!0,t=t||[];var a=m.e;a instanceof E?t=t.concat(S(a.errors)):t.push(a)}}if(r)throw new E(t)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if("function"!=typeof r._addParent){var n=r;(r=new e)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(r),r._addParent(this),r},e.prototype.remove=function(t){var r=this._subscriptions;if(r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}},e.prototype._addParent=function(t){var r=this._parent,n=this._parents;r&&r!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},e.EMPTY=((t=new e).closed=!0,t),e}();function S(t){return t.reduce(function(t,r){return t.concat(r instanceof E?r.errors:r)},[])}var O="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),T=function(o){function i(t,r,n){var e=o.call(this)||this;switch(e.syncErrorValue=null,e.syncErrorThrown=!1,e.syncErrorThrowable=!1,e.isStopped=!1,e._parentSubscription=null,arguments.length){case 0:e.destination=d;break;case 1:if(!t){e.destination=d;break}if("object"==typeof t){t instanceof i?(e.syncErrorThrowable=t.syncErrorThrowable,(e.destination=t).add(e)):(e.syncErrorThrowable=!0,e.destination=new k(e,t));break}default:e.syncErrorThrowable=!0,e.destination=new k(e,t,r,n)}return e}return n(i,o),i.prototype[O]=function(){return this},i.create=function(t,r,n){var e=new i(t,r,n);return e.syncErrorThrowable=!1,e},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var t=this._parent,r=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=r,this._parentSubscription=null,this},i}(g),k=function(c){function t(t,r,n,e){var o,i=c.call(this)||this;i._parentSubscriber=t;var s=i;return l(r)?o=r:r&&(o=r.next,n=r.error,e=r.complete,r!==d&&(l((s=Object.create(r)).unsubscribe)&&i.add(s.unsubscribe.bind(s)),s.unsubscribe=i.unsubscribe.bind(i))),i._context=s,i._next=o,i._error=n,i._complete=e,i}return n(t,c),t.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},t.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,n=p.useDeprecatedSynchronousErrorHandling;if(this._error)n&&r.syncErrorThrowable?this.__tryOrSetError(r,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(r.syncErrorThrowable)n?(r.syncErrorValue=t,r.syncErrorThrown=!0):h(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;h(t)}}},t.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};p.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable?this.__tryOrSetError(r,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(t){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw t;h(t)}},t.prototype.__tryOrSetError=function(r,t,n){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return p.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0):(h(t),!0)}return!1},t.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},t}(T);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function j(){}var P=function(){function n(t){this._isScalar=!1,t&&(this._subscribe=t)}return n.prototype.lift=function(t){var r=new n;return r.source=this,r.operator=t,r},n.prototype.subscribe=function(t,r,n){var e=this.operator,o=function(t,r,n){if(t){if(t instanceof T)return t;if(t[O])return t[O]()}return t||r||n?new T(t,r,n):new T(d)}(t,r,n);if(e?e.call(o,this.source):o.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),p.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){p.useDeprecatedSynchronousErrorHandling&&(r.syncErrorThrown=!0,r.syncErrorValue=t),!function(t){for(;t;){var r=t.destination;if(t.closed||t.isStopped)return!1;t=r&&r instanceof T?r:null}return!0}(r)?console.warn(t):r.error(t)}},n.prototype.forEach=function(e,t){var o=this;return new(t=A(t))(function(t,r){var n;n=o.subscribe(function(t){try{e(t)}catch(t){r(t),n&&n.unsubscribe()}},r,t)})},n.prototype._subscribe=function(t){var r=this.source;return r&&r.subscribe(t)},n.prototype[x]=function(){return this},n.prototype.pipe=function(){for(var r,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:((r=t)?1===r.length?r[0]:function(t){return r.reduce(function(t,r){return r(t)},t)}:j)(this)},n.prototype.toPromise=function(t){var e=this;return new(t=A(t))(function(t,r){var n;e.subscribe(function(t){return n=t},function(t){return r(t)},function(){return t(n)})})},n.create=function(t){return new n(t)},n}();function A(t){if(t||(t=p.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function D(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}D.prototype=Object.create(Error.prototype);function H(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}H.prototype=Object.create(Error.prototype);function C(r,n){return function(t){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new L(r,n))}}var L=function(){function t(t,r){this.project=t,this.thisArg=r}return t.prototype.call=function(t,r){return r.subscribe(new R(t,this.project,this.thisArg))},t}(),R=function(o){function t(t,r,n){var e=o.call(this,t)||this;return e.project=r,e.count=0,e.thisArg=n||e,e}return n(t,o),t.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(r)},t}(T);function U(t,n,e,r){return l(e)&&(r=e,e=void 0),r?U(t,n,e).pipe(C(function(t){return b(t)?r.apply(void 0,t):r(t)})):new P(function(r){!function t(r,n,e,o,i){var s;if(d=r,d&&"function"==typeof d.addEventListener&&"function"==typeof d.removeEventListener){var c=r;r.addEventListener(n,e,i),s=function(){return c.removeEventListener(n,e,i)}}else if(h=r,h&&"function"==typeof h.on&&"function"==typeof h.off){var u=r;r.on(n,e),s=function(){return u.off(n,e)}}else if(p=r,p&&"function"==typeof p.addListener&&"function"==typeof p.removeListener){var a=r;r.addListener(n,e),s=function(){return a.removeListener(n,e)}}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(var l=0,f=r.length;l<f;l++)t(r[l],n,e,o,i)}var p;var h;var d;o.add(s)}(t,n,function(t){r.next(1<arguments.length?Array.prototype.slice.call(arguments):t)},r,e)})}var M=function(){function e(t){o(this,e),this.config=t,this.theme=t.theme,this.scrollArr=[]}return r(e,[{key:"init",value:function(){var r=this,n=e.utils,t={smoothScroll:function(){$(".toc-link").on("click",function(){$("html, body").animate({scrollTop:$($.attr(this,"href")).offset().top-200})})},picPos:function(){var r=this;$(".post-content").each(function(){$(this).find("img").each(function(){$(this).parent("p").css("text-align","center");var t='<img src="'.concat(this.src,'"');r.theme.lazy&&(t='<img class="lazy" data-src="'.concat(this.src,'"')),$(this).replaceWith('<a href="'.concat(this.src,'" data-title="').concat(this.alt,'" data-lightbox="group">').concat(t,' alt="').concat(this.alt,'"></a>'))})})},showComments:function(){var t=this;$("#com-switch").on("click",function(){n("iss","#post-comments").display()?($("#post-comments").css("display","block").addClass("syuanpi fadeInDown"),$(t).removeClass("syuanpi").css("transform","rotate(180deg)")):($(t).addClass("syuanpi").css("transform",""),n("cls","#post-comments").opreate("fadeInDown","remove"),n("ani","#post-comments").end("fadeOutUp",function(){$(this).css("display","none")}))})}};return e.opScroll(this.scrollArr),Object.values(t).forEach(function(t){return t.call(r)})}},{key:"back2top",value:function(){$(".toTop").on("click",function(){$("html, body").animate({scrollTop:0})})}},{key:"updateRound",value:function(t){var r=Math.floor(t/($(document).height()-$(window).height())*100);$("#scrollpercent").html(r)}},{key:"showToc",value:function(){var s=e.utils,c=$(".toc-link"),u=$(".headerlink");this.scrollArr.push(function(r){var t=$.map(u,function(t){return $(t).offset().top});$(".title-link a").each(function(){var t=s("cls",this);0<=r&&r<230?t.opreate("active"):t.opreate("active","remove")});for(var n=0;n<c.length;n++){var e=t[n],o=n+1===c.length?1/0:t[n+1],i=s("cls",c[n]);e<r+200&&r+200<=o?i.opreate("active"):i.opreate("active","remove")}})}},{key:"titleStatus",value:function(){var r,n=document.title;document.addEventListener("visibilitychange",function(){var t=Math.floor($(window).scrollTop()/($(document).height()-$(window).height())*100);$(document).height()-$(window).height()==0&&(function(t){throw new Error('"'+t+'" is read-only')}("sct"),t=100),document.hidden?(clearTimeout(r),document.title="Read "+t+"% · "+n):(document.title="Welcome Back · "+n,r=setTimeout(function(){document.title=n},3e3))})}},{key:"showReward",value:function(){var t=e.utils,r=t("ani","#reward-btn");$("#reward-btn").click(function(){t("iss","#reward-btn")?($("#reward-wrapper").css("display","flex"),r.end("clarity")):r.end("melt",function(){$("#reward-wrapper").hide()})})}},{key:"pjax",value:function(){}}],[{key:"utils",value:function(t,r){var e=function(n){return{opreate:function(t,r){return"remove"===r?$(n).removeClass(t):$(n).addClass(t)},exist:function(t){return $(n).hasClass(t)}}};return{cls:e,iss:function(t){return{banderole:function(){return"banderole"===this.theme.scheme},balance:function(){return"balance"===this.theme.scheme},display:function(){return"none"===$(t).css("display")}}},ani:function(n){return{close:function(){return e.opreate(".syuanpi","syuanpi","remove")},end:function(t,r){$(n).addClass(t).one("webkitAnimationEnd AnimationEnd",function(){$(n).removeClass(t),r&&r.call(null,n)})}}}}[t](r)}},{key:"opScroll",value:function(t){var r=U(window,"scroll").pipe(C(function(t){return t.target.scrollingElement.scrollTop}));t.length&&r.subscribe(function(r){return t.forEach(function(t){return t(r)})})}}]),e}();return function(t){function n(t){var r;return o(this,n),(r=c(this,i(n).call(this,t))).utils=M.utils,r}return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&s(t,r)}(n,M),r(n,[{key:"back2top",value:function(){var r=this;this.utils("cls","#backtop").opreate("melt","remove"),this.scrollArr.push(function(t){r.updateRound(t)}),u(i(n.prototype),"back2top",this).call(this)}},{key:"switchToc",value:function(){var r=this.utils,t=r("cls","#toc-switch"),n=r("ani",".toc-inner");function e(t){r("cls",".menu-item").opreate("has_toc",t),r("cls",".main-nav").opreate("has_toc",t)}r("cls","#toc-switch").opreate("not-toc"),$("#toc-switch").on("click",function(){t.exist("not-toc")?(t.opreate("not-toc","remove"),n.end("fadeInDown"),$(".toc-inner").show(),e()):(n.end("fadeOutUp",function(){$(".toc-inner").hide()}),t.opreate("not-toc"),e("remove"))})}}]),n}()});
